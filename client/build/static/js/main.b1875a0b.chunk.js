(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{132:function(e,t,a){},209:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),c=a(49),r=a.n(c),o=(a(132),a(32)),i=a(25),l=a(16),d=a.n(l),m=a(10),x=a.n(m),u=a(17),b=a(29),p=a(20),j=a(15),h=a(216),g=a(218),f=a(219),O=a(48),y=a(1),N={user:null},v=Object(s.createContext)(),w=function(e,t){switch(t.type){case"LOGIN":return Object(p.a)(Object(p.a)({},e),{},{user:t.payload});case"LOGOUT":return Object(p.a)(Object(p.a)({},e),{},{user:null});default:return e}},k=function(e){var t=e.children,a=Object(i.f)(),n=Object(s.useReducer)(w,N),c=Object(j.a)(n,2),r=c[0],o=c[1],l=function(){var e=Object(u.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/auth/current-user");case 3:t=e.sent,a=t.data,o({type:"LOGIN",payload:a.user}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){l()}),[]),d.a.interceptors.response.use((function(e){return e}),(function(e){var t=e.response;return 401===t.status&&t.config&&!t.config.__isRetryRequest?new Promise((function(e,t){d.a.get("/auth/logout").then((function(e){console.log("401 error -> logout"),a.push("/")})).catch((function(e){console.log("axios interceptors error: ",e),t(e)}))})):Promise.reject(e)})),Object(y.jsx)(v.Provider,{value:{state:r,dispatch:o},children:t})},C="Tom Cook",T="tom@example.com",D="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80";function S(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}function F(e){var t=e.children,a=Object(s.useContext)(v).dispatch,n=Object(s.useState)(""),c=Object(j.a)(n,2),r=c[0],o=c[1],l=Object(i.f)(),m=[{name:"Donor",href:"/agent/donor",current:"/agent/donor"===r},{name:"Transaction",href:"/agent/transaction",current:"/agent/transaction"===r}],x=[{name:"Your Profile",href:""},{name:"Settings",href:""},{name:"Sign out",href:"",logout:function(e){e.preventDefault(),console.log("logout");try{d.a.get("/auth/logout"),a({type:"LOGOUT"}),l.push("/")}catch(t){console.log(t)}}}];return Object(s.useEffect)((function(){o(window.location.pathname)}),[]),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:"min-h-full",children:[Object(y.jsx)(h.a,{as:"nav",className:"bg-gray-800",children:function(e){var t=e.open;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Object(y.jsxs)("div",{className:"flex items-center justify-between h-16",children:[Object(y.jsxs)("div",{className:"flex items-center",children:[Object(y.jsx)("div",{className:"flex-shrink-0",children:Object(y.jsx)("span",{className:"text-2xl text-white font-semibold",children:"PMPPMM"})}),Object(y.jsx)("div",{className:"hidden md:block",children:Object(y.jsx)("div",{className:"ml-10 flex items-baseline space-x-4",children:m.map((function(e){return Object(y.jsx)("a",{href:e.href,className:S(e.current?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white","px-3 py-2 rounded-md text-sm font-medium"),"aria-current":e.current?"page":void 0,children:e.name},e.name)}))})})]}),Object(y.jsx)("div",{className:"hidden md:block",children:Object(y.jsx)("div",{className:"ml-4 flex items-center md:ml-6",children:Object(y.jsxs)(g.a,{as:"div",className:"ml-3 relative",children:[Object(y.jsx)("div",{children:Object(y.jsxs)(g.a.Button,{className:"max-w-xs bg-gray-800 rounded-full flex items-center text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:[Object(y.jsx)("span",{className:"sr-only",children:"Open user menu"}),Object(y.jsx)("img",{className:"h-8 w-8 rounded-full",src:D,alt:""})]})}),Object(y.jsx)(f.a,{as:s.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:Object(y.jsx)(g.a.Items,{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:x.map((function(e){return Object(y.jsx)(g.a.Item,{children:function(t){var a=t.active;return Object(y.jsx)("a",{onClick:e.logout,href:e.href,className:S(a?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"),children:e.name})}},e.name)}))})})]})})}),Object(y.jsx)("div",{className:"-mr-2 flex md:hidden",children:Object(y.jsxs)(h.a.Button,{className:"bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:[Object(y.jsx)("span",{className:"sr-only",children:"Open main menu"}),t?Object(y.jsx)(O.c,{className:"block h-6 w-6","aria-hidden":"true"}):Object(y.jsx)(O.b,{className:"block h-6 w-6","aria-hidden":"true"})]})})]})}),Object(y.jsxs)(h.a.Panel,{className:"md:hidden",children:[Object(y.jsx)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:m.map((function(e){return Object(y.jsx)(h.a.Button,{as:"a",href:e.href,className:S(e.current?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white","block px-3 py-2 rounded-md text-base font-medium"),"aria-current":e.current?"page":void 0,children:e.name},e.name)}))}),Object(y.jsxs)("div",{className:"pt-4 pb-3 border-t border-gray-700",children:[Object(y.jsxs)("div",{className:"flex items-center px-5",children:[Object(y.jsx)("div",{className:"flex-shrink-0",children:Object(y.jsx)("img",{className:"h-10 w-10 rounded-full",src:D,alt:""})}),Object(y.jsxs)("div",{className:"ml-3",children:[Object(y.jsx)("div",{className:"text-base font-medium leading-none text-white",children:C}),Object(y.jsx)("div",{className:"text-sm font-medium leading-none text-gray-400",children:T})]}),Object(y.jsxs)("button",{type:"button",className:"ml-auto bg-gray-800 flex-shrink-0 p-1 rounded-full text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:[Object(y.jsx)("span",{className:"sr-only",children:"View notifications"}),Object(y.jsx)(O.a,{className:"h-6 w-6","aria-hidden":"true"})]})]}),Object(y.jsx)("div",{className:"mt-3 px-2 space-y-1",children:x.map((function(e){return Object(y.jsx)(h.a.Button,{as:"a",href:e.href,className:"block px-3 py-2 rounded-md text-base font-medium text-gray-400 hover:text-white hover:bg-gray-700",children:e.name},e.name)}))})]})]})]})}}),Object(y.jsx)("header",{className:"bg-white shadow",children:Object(y.jsx)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:Object(y.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"})})}),Object(y.jsx)("main",{children:Object(y.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:t})})]})})}var E=function(){var e=Object(i.f)(),t=Object(s.useState)(!1),a=Object(j.a)(t,2),n=a[0],c=a[1],r=Object(s.useState)(""),o=Object(j.a)(r,2),l=o[0],m=o[1],h=Object(s.useState)({isCompany:!1,name:"",registrationNo:"",icNumber:"",contactNumber:"",contactPerson:"",email:"",address:""}),g=Object(j.a)(h,2),f=g[0],O=g[1];Object(s.useEffect)((function(){}),[f]);var N=function(e){O(Object(p.a)(Object(p.a)({},f),{},Object(b.a)({},e.target.name,e.target.value)))},v=function(){var t=Object(u.a)(x.a.mark((function t(a){var s,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),!n){t.next=13;break}if(0!==f.name.length&&0!==f.contactNumber.length&&0!==f.contactPerson&&0!==f.address.length){t.next=8;break}return console.log("error"),m("Please fill the required information"),t.abrupt("return");case 8:if(null!=f.registrationNo.match("^[0-9]{12}$")){t.next=11;break}return m("Enter a valid company registration number"),t.abrupt("return");case 11:t.next=21;break;case 13:if(0!==f.name.length&&0!==f.contactNumber.length&&0!==f.address.length){t.next=18;break}return m("Please fill the required information"),t.abrupt("return");case 18:if(null!=f.icNumber.match("^[0-9]{12}$")){t.next=21;break}return m("Enter a valid IC Number"),t.abrupt("return");case 21:if(null==f.email.match("@gmail.com$")&&null==f.email.match("@yahoo.com$")){t.next=24;break}return m("Personal emails (Gmail and Yahoo) are not allowed. Please use company email"),t.abrupt("return");case 24:return t.prev=24,t.next=27,d.a.post("/donor/create",{donorInfo:f,agentId:1});case 27:s=t.sent,(c=s.data).success&&e.push("/agent/donor"),console.log(c),t.next=36;break;case 33:t.prev=33,t.t0=t.catch(24),m(t.t0.response.data);case 36:case"end":return t.stop()}}),t,null,[[24,33]])})));return function(e){return t.apply(this,arguments)}}();return Object(y.jsx)(F,{children:Object(y.jsxs)("div",{className:"mt-10 sm:mt-0",children:[Object(y.jsx)("div",{className:"col-span-2 sm:col-span-2 mb-2",children:Object(y.jsxs)("label",{className:"inline-flex items-center",children:[Object(y.jsx)("input",{name:"isCompany",onChange:function(){O(Object(p.a)(Object(p.a)({},f),{},{isCompany:!n})),c(!n)},defaultChecked:n,className:"text-indigo-500 w-6 h-6 mr-2 focus:ring-indigo-400 focus:ring-opacity-25 border border-gray-300 rounded",type:"checkbox"}),"Tick Here If Donor Is A Company"]})}),Object(y.jsx)("div",{className:"mt-5 md:mt-0 md:col-span-2",children:Object(y.jsx)("form",{onSubmit:v,action:"#",method:"POST",children:Object(y.jsxs)("div",{className:"shadow overflow-hidden sm:rounded-md",children:[Object(y.jsxs)("div",{className:"px-4 py-5 bg-white sm:p-6",children:[""!==l&&Object(y.jsx)("div",{className:"px-4 py-2 bg-red-200 rounded-md text-sm font-semibold",children:l}),n?Object(y.jsx)("div",{className:"px-4 py-5 bg-white sm:p-6",children:Object(y.jsxs)("div",{className:"grid grid-cols-6 gap-6",children:[Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-6",children:[Object(y.jsx)("label",{htmlFor:"company-name",className:"block text-sm font-medium text-gray-700",children:"Company Name"}),Object(y.jsx)("input",{type:"text",name:"name",id:"company-name",onChange:N,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"registration-no",className:"block text-sm font-medium text-gray-700",children:"Registration No"}),Object(y.jsx)("input",{type:"text",name:"registrationNo",id:"registration-no",onChange:N,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),Object(y.jsx)("input",{type:"text",name:"email",id:"email",onChange:N,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"contact-person",className:"block text-sm font-medium text-gray-700",children:"Contact Person"}),Object(y.jsx)("input",{type:"text",name:"contactPerson",id:"contact-person",onChange:N,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"contact-number",className:"block text-sm font-medium text-gray-700",children:"Contact Number"}),Object(y.jsx)("input",{type:"number",name:"contactNumber",id:"contact-number",onChange:N,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6",children:[Object(y.jsx)("label",{htmlFor:"company-address",className:"block text-sm font-medium text-gray-700",children:"Company Address"}),Object(y.jsx)("input",{type:"text",name:"address",id:"company-address",onChange:N,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]})]})}):Object(y.jsx)("div",{className:"px-4 py-5 bg-white sm:p-6",children:Object(y.jsxs)("div",{className:"grid grid-cols-6 gap-6",children:[Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-6",children:[Object(y.jsx)("label",{htmlFor:"person-name",className:"block text-sm font-medium text-gray-700",children:"Person Name"}),Object(y.jsx)("input",{type:"text",name:"name",id:"person-name",onChange:N,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"ic-number",className:"block text-sm font-medium text-gray-700",children:"IC No"}),Object(y.jsx)("input",{type:"text",name:"icNumber",id:"ic-number",onChange:N,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),Object(y.jsx)("input",{type:"text",name:"email",id:"email",onChange:N,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"contact-number",className:"block text-sm font-medium text-gray-700",children:"Contact Number"}),Object(y.jsx)("input",{type:"number",name:"contactNumber",id:"contact-number",onChange:N,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6",children:[Object(y.jsx)("label",{htmlFor:"home-address",className:"block text-sm font-medium text-gray-700",children:"Home Address"}),Object(y.jsx)("input",{type:"text",name:"address",id:"home-address",onChange:N,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]})]})})]}),Object(y.jsx)("div",{className:"px-4 py-3 bg-gray-50 text-right sm:px-6",children:Object(y.jsx)("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Add Donor"})})]})})})]})})},P=a(30),z=a.n(P);function M(e){var t=e.donorsList,a=e.disabled,s=12096e5,n=new Date;return Object(y.jsx)("div",{className:"flex flex-col",children:Object(y.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:Object(y.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:Object(y.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:Object(y.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[Object(y.jsx)("thead",{className:"bg-gray-50",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Number"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Address"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Expiry Date"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"})]})}),Object(y.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((function(e,t){return Object(y.jsxs)("tr",{className:"".concat(new Date(e.expiryDate)-n<0&&"bg-red-100"," ").concat(new Date(e.expiryDate)-n<s&&new Date(e.expiryDate)-n>0&&"bg-yellow-100"),children:[Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:t+1})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.name})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.contactNumber})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.address})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:z()(e.expiryDate).format("DD/MM/YYYY")})}),Object(y.jsxs)("td",{className:"px-4 py-2 whitespace-nowrap text-sm font-medium flex",children:[!a&&Object(y.jsx)(o.b,{to:"/agent/add-transaction/".concat(e.id),children:Object(y.jsx)("button",{className:"p-2 bg-indigo-100 text-indigo-600 font-semibold hover:text-indigo-900 hover:bg-indigo-200 rounded-md",children:"Add Transaction"})}),!a&&new Date(e.expiryDate)-n<s&&Object(y.jsx)("button",{onClick:function(){return alert("Donor Expiry Date Extended")},className:"p-2 bg-indigo-100 text-indigo-600 font-semibold hover:text-indigo-900 ml-2 hover:bg-indigo-200 rounded-md",children:"Extend Expiry Date"})]})]},e.id)}))})]})})})})})}var q=function(){var e=Object(s.useContext)(v).state,t=Object(s.useState)([]),a=Object(j.a)(t,2),n=a[0],c=a[1],r=Object(s.useState)(""),i=Object(j.a)(r,2),l=i[0],m=i[1],b=function(){var e=Object(u.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.post("/donor/get");case 3:t=e.sent,a=t.data,c(a.allDonors),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.response.status);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return Object(s.useEffect)((function(){e.user&&"SUSPENDED"===e.user.status?m("Your account has been suspended. Please contact admin to resolve it."):m("")}),[e,l]),Object(s.useEffect)((function(){b()}),[]),Object(y.jsx)("div",{children:Object(y.jsxs)(F,{children:[Object(y.jsxs)("div",{className:"px-4 py-3 text-right sm:px-6 ".concat(l.length>0&&"is-disabled"),children:[""!==l&&Object(y.jsx)("div",{className:"mb-6 px-4 py-2 text-left  bg-red-200 rounded-md text-sm font-semibold",children:l}),Object(y.jsx)(o.b,{to:"/agent/add-donor",children:Object(y.jsx)("button",{type:"button",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Add Donor"})})]}),Object(y.jsx)(M,{disabled:l.length>0,donorsList:n})]})})};function A(e){var t=e.transactionList;return Object(y.jsx)("div",{className:"flex flex-col",children:Object(y.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:Object(y.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:Object(y.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:Object(y.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[Object(y.jsx)("thead",{className:"bg-gray-50",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Type"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cheque Date"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cheque No"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bank Name"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Download Doc"})]})}),Object(y.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:t+1})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.donor.name})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:"COMPLETED"===e.status?Object(y.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:e.status}):Object(y.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:e.status})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.amount})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.paymentType})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.chequeDate&&z()(e.chequeDate).format("DD/MM/YYYY")})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.chequeNo})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.bankName})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium cursor-pointer",children:Object(y.jsxs)("div",{className:"flex space-x-2",children:[Object(y.jsx)("a",{href:e.doc1Url,target:"_blank",className:"bg-green-50 p-2 text-xs text-green-600 hover:bg-green-100 rounded-md",children:"Medical List"}),Object(y.jsx)("a",{href:e.doc2Url,target:"_blank",className:"bg-red-50 p-2 text-xs text-red-600 hover:bg-red-100 rounded-md",children:"Tax Exemption"})]})})]},e.id)}))})]})})})})})}var I=function(){var e=Object(s.useState)([]),t=Object(j.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(null),r=Object(j.a)(c,2),o=(r[0],r[1],Object(s.useState)(null)),i=Object(j.a)(o,2);return i[0],i[1],Object(s.useEffect)((function(){(function(){var e=Object(u.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.post("/transaction/get");case 3:t=e.sent,a=t.data,n(a.allTransactions),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(y.jsxs)(F,{children:[Object(y.jsx)("div",{className:"px-4 py-3 text-right sm:px-6"}),Object(y.jsx)(A,{transactionList:a})]})},Y=a(125),L=a(87),R=a.n(L),B=a(11);function H(e){var t=e.medicalList,a=e.handleChange,s=e.grandTotal;return Object(y.jsx)("div",{className:"flex flex-col",children:Object(y.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:Object(y.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:Object(y.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:Object(y.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[Object(y.jsx)("thead",{className:"bg-gray-50",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit Cost"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Requested"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Cost"})]})}),Object(y.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[t.map((function(e){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.name}),Object(y.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",e.unitCost]}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:Object(y.jsx)("input",{type:"number",name:e.shortName,id:e.shortName,onChange:a,min:"0",value:e.requested,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})}),Object(y.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["RM ",e.totalCost]})]},e.id)})),Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:" "}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:" "}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-md font-bold text-gray-900",children:"Total Cost"}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-md font-bold text-gray-900",children:s})]})]})]})})})})})}var G=function(e){var t=e.donor,a=e.grandTotal,n=e.handleFormSubmit,c=Object(s.useState)({}),r=Object(j.a)(c,2),o=r[0],i=r[1],l=function(e){i(Object(p.a)(Object(p.a)({},o),{},Object(b.a)({},e.target.name,e.target.value)))};return Object(y.jsx)("div",{className:"mt-10 sm:mt-0",children:Object(y.jsx)("div",{className:"mt-5 md:mt-0 md:col-span-2",children:Object(y.jsx)("form",{onSubmit:n,action:"#",method:"POST",children:Object(y.jsxs)("div",{className:"shadow overflow-hidden sm:rounded-md",children:[t.isCompany?Object(y.jsx)("div",{className:"px-4 py-5 bg-white sm:p-6",children:Object(y.jsxs)("div",{className:"px-4 py-5 bg-white sm:p-6",children:[Object(y.jsxs)("div",{className:"flex mb-6",children:[Object(y.jsx)("span",{className:"font-bold pr-2",children:"Account Type: "}),"Company"]}),Object(y.jsxs)("div",{className:"grid grid-cols-6 gap-6",children:[Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"company-name",className:"block text-sm font-medium text-gray-700",children:"Company Name"}),Object(y.jsx)("input",{type:"text",name:"name",id:"company-name",autoComplete:"company-name",onChange:l,disabled:!0,value:t.name,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"registration-no",className:"block text-sm font-medium text-gray-700",children:"Registration No"}),Object(y.jsx)("input",{type:"text",name:"registrationNo",id:"registration-no",autoComplete:"registration-no",onChange:l,disabled:!0,value:t.registrationNo,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),Object(y.jsx)("input",{type:"text",name:"email",id:"email",autoComplete:"email",onChange:l,disabled:!0,value:t.email,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"contact-person",className:"block text-sm font-medium text-gray-700",children:"Contact Person"}),Object(y.jsx)("input",{type:"text",name:"contactPerson",id:"contact-person",autoComplete:"contact-person",onChange:l,disabled:!0,value:t.contactPerson,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"contact-number",className:"block text-sm font-medium text-gray-700",children:"Contact Number"}),Object(y.jsx)("input",{type:"number",name:"contactNumber",id:"contact-number",autoComplete:"contact-number",onChange:l,disabled:!0,value:t.contactNumber,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"company-address",className:"block text-sm font-medium text-gray-700",children:"Company Address"}),Object(y.jsx)("input",{type:"text",name:"address",id:"company-address",autoComplete:"company-address",onChange:l,disabled:!0,value:t.address,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"total-contribution",className:"block text-sm font-medium text-gray-700",children:"Total Contribution"}),Object(y.jsx)("input",{type:"text",name:"totalContribution",id:"total-contribution",autoComplete:"total-contribution",onChange:l,disabled:!0,value:a,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]})]})]})}):Object(y.jsx)("div",{className:"px-4 py-5 bg-white sm:p-6",children:Object(y.jsxs)("div",{className:"px-4 py-5 bg-white sm:p-6",children:[Object(y.jsxs)("div",{className:"flex mb-6",children:[Object(y.jsx)("span",{className:"font-bold pr-2",children:"Account Type: "}),"Personal"]}),Object(y.jsxs)("div",{className:"grid grid-cols-6 gap-6",children:[Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"company-name",className:"block text-sm font-medium text-gray-700",children:"Name"}),Object(y.jsx)("input",{type:"text",name:"name",id:"company-name",autoComplete:"company-name",onChange:l,disabled:!0,value:t.name,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"ic-number",className:"block text-sm font-medium text-gray-700",children:"IC Number"}),Object(y.jsx)("input",{type:"text",name:"icNumber",id:"ic-number",autoComplete:"ic-number",onChange:l,disabled:!0,value:t.icNumber,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address"}),Object(y.jsx)("input",{type:"text",name:"email",id:"email",autoComplete:"email",onChange:l,disabled:!0,value:t.email,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"contact-number",className:"block text-sm font-medium text-gray-700",children:"Contact Number"}),Object(y.jsx)("input",{type:"number",name:"contactNumber",id:"contact-number",autoComplete:"contact-number",onChange:l,disabled:!0,value:t.contactNumber,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Address"}),Object(y.jsx)("input",{type:"text",name:"address",id:"address",autoComplete:"address",onChange:l,disabled:!0,value:t.address,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"total-contribution",className:"block text-sm font-medium text-gray-700",children:"Total Contribution"}),Object(y.jsx)("input",{type:"text",name:"totalContribution",id:"total-contribution",autoComplete:"total-contribution",onChange:l,disabled:!0,value:a,className:"mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md"})]})]})]})}),Object(y.jsx)("div",{className:"px-4 py-3 bg-gray-50 text-right sm:px-6",children:Object(y.jsx)("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Submit"})})]})})})})},U=[{id:1,shortName:"standard-wheelchair",name:"Standard Wheelchair",unitCost:500,requested:0,totalCost:0,y:643},{id:2,shortName:"lightweight-wheelchair-multi-function",name:"Lightweight Wheelchair Multi Function",unitCost:1500,requested:0,totalCost:0,y:620},{id:3,shortName:"walking-frame",name:"Walking Frame",unitCost:210,requested:0,totalCost:0,y:600},{id:4,shortName:"Adult Diaper",name:"Adult Diaper",unitCost:23,requested:0,totalCost:0,y:580},{id:5,shortName:"nebulizer",name:"Nebulizer",unitCost:750,requested:0,totalCost:0,y:560},{id:6,shortName:"artificial-limb",name:"Artificial Limb",unitCost:8e3,requested:0,totalCost:0,y:540},{id:7,shortName:"ripple-mattress",name:"Ripple Mattress",unitCost:750,requested:0,totalCost:0,y:520},{id:8,shortName:"oxygen-concentrator",name:"Oxygen Concentrator",unitCost:6e3,requested:0,totalCost:0,y:495},{id:9,shortName:"suction-pump-machine",name:"Suction Pump Machine",unitCost:900,requested:0,totalCost:0,y:470},{id:10,shortName:"hearing-aid",name:"Hearing Aid",unitCost:2860,requested:0,totalCost:0,y:446},{id:11,shortName:"blood-pressure-set",name:"Blood Pressure Set",unitCost:400,requested:0,totalCost:0,y:420},{id:12,shortName:"glucometer-set",name:"Glucometer Set",unitCost:300,requested:0,totalCost:0,y:395},{id:13,shortName:"cpap-machine",name:"Cpap Machine",unitCost:7e3,requested:0,totalCost:0,y:375},{id:14,shortName:"aero-chamber-child",name:"Aero Chamber (Child)",unitCost:100,requested:0,totalCost:0,y:352},{id:15,shortName:"aero-chamber-adult",name:"Aero Chamber (Adult)",unitCost:110,requested:0,totalCost:0,y:330},{id:16,shortName:"hand-sanitizer",name:"Hand Sanitizer",unitCost:35,requested:0,totalCost:0,y:305},{id:17,shortName:"hand-glove",name:"Handle Glove",unitCost:30,requested:0,totalCost:0,y:280},{id:18,shortName:"face-mask",name:"Face Mask",unitCost:70,requested:0,totalCost:0,y:258},{id:19,shortName:"infrared-forehead-thermometer",name:"Infared Forehead Thermometer",unitCost:270,requested:0,totalCost:0,y:238}];var W=function(){var e=Object(i.f)(),t=Object(s.useState)({}),a=Object(j.a)(t,2),n=a[0],c=a[1],r=Object(s.useState)(0),o=Object(j.a)(r,2),l=o[0],m=o[1],b=Object(s.useState)(1),p=Object(j.a)(b,2),h=p[0],g=p[1],f=Object(s.useState)(U),O=Object(j.a)(f,2),N=O[0],v=O[1],w=Object(s.useState)({}),k=Object(j.a)(w,2),C=(k[0],k[1],Object(i.g)().donorId);Object(s.useEffect)((function(){(function(){var t=Object(u.a)(x.a.mark((function t(){var a,s;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.post("/donor/validate",{donorId:C,agentId:1});case 3:a=t.sent,s=a.data.donor,c(s[0]),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),e.push("/");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}})()()}),[]);var T=function(){var t=Object(u.a)(x.a.mark((function t(a){var s,c;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),t.prev=1,console.log(n),t.next=5,d.a.post("/transaction/create",{donorInfo:n,grandTotal:l});case 5:s=t.sent,c=s.data,console.log(c),D(c.data.transactionId),E(c.data.transactionId),c.success&&e.push("/agent/transaction"),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}(),D=function(){var e=Object(u.a)(x.a.mark((function e(t){var a,s,n,c,r,o,i,l,m,u;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("generatePDF"),"https://edemy-bucket-10.s3.ap-southeast-1.amazonaws.com/MEDICAL+LIST+new.pdf",e.next=4,fetch("https://edemy-bucket-10.s3.ap-southeast-1.amazonaws.com/MEDICAL+LIST+new.pdf").then((function(e){return e.arrayBuffer()}));case 4:return a=e.sent,e.next=7,B.PDFDocument.load(a);case 7:return s=e.sent,e.next=10,s.embedFont(B.StandardFonts.Helvetica);case 10:for(n=e.sent,c=s.getPages(),r=c[0],o=r.getSize(),o.width,o.height,i=0,l=z()(new Date).format("DD/MM/YYYY").split("/"),r.drawText("".concat(t),{x:300,y:686,size:12,font:n,color:Object(B.rgb)(.1,.1,.1)}),r.drawText("".concat(l[0].split("")[0]),{x:387,y:686,size:12,font:n,color:Object(B.rgb)(.1,.1,.1)}),r.drawText("".concat(l[0].split("")[1]),{x:403,y:686,size:12,font:n,color:Object(B.rgb)(.1,.1,.1)}),r.drawText("".concat(l[1].split("")[0]),{x:432,y:686,size:12,font:n,color:Object(B.rgb)(.1,.1,.1)}),r.drawText("".concat(l[1].split("")[1]),{x:449,y:686,size:12,font:n,color:Object(B.rgb)(.1,.1,.1)}),r.drawText("".concat(l[2].split("")[0]),{x:482,y:686,size:12,font:n,color:Object(B.rgb)(.1,.1,.1)}),r.drawText("".concat(l[2].split("")[1]),{x:499,y:686,size:12,font:n,color:Object(B.rgb)(.1,.1,.1)}),r.drawText("".concat(l[2].split("")[2]),{x:516,y:686,size:12,font:n,color:Object(B.rgb)(.1,.1,.1)}),r.drawText("".concat(l[2].split("")[3]),{x:533,y:686,size:12,font:n,color:Object(B.rgb)(.1,.1,.1)}),m=0;m<N.length;m++)0!==N[m].requested&&(r.drawText(N[m].requested.toString(),{x:410,y:N[m].y,size:11,font:n,color:Object(B.rgb)(.1,.1,.1)}),r.drawText(N[m].totalCost.toString(),{x:490,y:N[m].y,size:11,font:n,color:Object(B.rgb)(.1,.1,.1)}),i+=N[m].requested*N[m].unitCost);return r.drawText(i.toString(),{x:490,y:218,size:11,font:n,color:Object(B.rgb)(.1,.1,.1)}),e.next=29,s.saveAsBase64({dataUri:!0});case 29:u=e.sent,d.a.post("/transaction/upload-form",{file:u,no:1,transactionId:t}).then((function(e){console.log("completed"),console.log(e)}));case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(x.a.mark((function e(t){var a,s,n,c,r,o,i,l,d,m;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("generatePDF 2"),"https://edemy-bucket-10.s3.ap-southeast-1.amazonaws.com/MEDICAL+LIST+new.pdf",e.next=4,fetch("https://edemy-bucket-10.s3.ap-southeast-1.amazonaws.com/MEDICAL+LIST+new.pdf").then((function(e){return e.arrayBuffer()}));case 4:return a=e.sent,e.next=7,B.PDFDocument.load(a);case 7:return s=e.sent,e.next=10,s.embedFont(B.StandardFonts.Helvetica);case 10:for(n=e.sent,c=s.getPages(),r=c[0],o=r.getSize(),o.width,o.height,i=0,l=z()(new Date).format("DD/MM/YYYY").split("/"),r.drawText("".concat(t),{x:300,y:686,size:12,font:n,color:Object(B.rgb)(.1,.1,.1)}),r.drawText("".concat(l[0].split("")[0]),{x:387,y:686,size:12,font:n,color:Object(B.rgb)(.1,.1,.1)}),r.drawText("".concat(l[0].split("")[1]),{x:403,y:686,size:12,font:n,color:Object(B.rgb)(.1,.1,.1)}),r.drawText("".concat(l[1].split("")[0]),{x:432,y:686,size:12,font:n,color:Object(B.rgb)(.1,.1,.1)}),r.drawText("".concat(l[1].split("")[1]),{x:449,y:686,size:12,font:n,color:Object(B.rgb)(.1,.1,.1)}),r.drawText("".concat(l[2].split("")[0]),{x:482,y:686,size:12,font:n,color:Object(B.rgb)(.1,.1,.1)}),r.drawText("".concat(l[2].split("")[1]),{x:499,y:686,size:12,font:n,color:Object(B.rgb)(.1,.1,.1)}),r.drawText("".concat(l[2].split("")[2]),{x:516,y:686,size:12,font:n,color:Object(B.rgb)(.1,.1,.1)}),r.drawText("".concat(l[2].split("")[3]),{x:533,y:686,size:12,font:n,color:Object(B.rgb)(.1,.1,.1)}),d=0;d<N.length;d++)0!==N[d].requested&&(r.drawText(N[d].requested.toString(),{x:410,y:N[d].y,size:11,font:n,color:Object(B.rgb)(.1,.1,.1)}),r.drawText(N[d].totalCost.toString(),{x:490,y:N[d].y,size:11,font:n,color:Object(B.rgb)(.1,.1,.1)}),i+=N[d].requested*N[d].unitCost);return r.drawText(i.toString(),{x:490,y:218,size:11,font:n,color:Object(B.rgb)(.1,.1,.1)}),e.next=29,s.save();case 29:m=e.sent,R()(m,"medical-list-example.pdf","application/pdf");case 31:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=function(){var e=Object(u.a)(x.a.mark((function e(t){var a,s,c,r,o,i,m;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://edemy-bucket-10.s3.ap-southeast-1.amazonaws.com/EXEMPTION+FORM+NEW.pdf",e.next=3,fetch("https://edemy-bucket-10.s3.ap-southeast-1.amazonaws.com/EXEMPTION+FORM+NEW.pdf").then((function(e){return e.arrayBuffer()}));case 3:return a=e.sent,e.next=6,B.PDFDocument.load(a);case 6:return s=e.sent,e.next=9,s.embedFont(B.StandardFonts.Helvetica);case 9:return c=e.sent,r=s.getPages(),o=r[0],i=o.getSize(),i.width,i.height,n.isCompany?(o.drawText("".concat(z()(new Date).format("DD/MM/YYYY")),{x:80,y:720,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText("Company",{x:190,y:702,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(n.registrationNo.toString(),{x:223,y:657,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText("X",{x:55,y:627,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(n.name,{x:260,y:630,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(n.address,{x:98,y:574,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(l.toString(),{x:160,y:555,size:20,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(n.contactNumber.toString(),{x:110,y:535,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(n.email,{x:110,y:515,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)})):(o.drawText("".concat(z()(new Date).format("DD/MM/YYYY")),{x:80,y:720,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText("Personal",{x:190,y:702,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(n.name,{x:120,y:482,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(n.address,{x:120,y:460,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(n.icNumber,{x:90,y:412,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(l.toString(),{x:160,y:555,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(n.contactNumber.toString(),{x:390,y:412,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)})),e.next=16,s.saveAsBase64({dataUri:!0});case 16:m=e.sent,d.a.post("/transaction/upload-form",{file:m,no:2,transactionId:t}).then((function(e){console.log("completed"),console.log(e)}));case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(u.a)(x.a.mark((function e(t){var a,s,c,r,o,i,d;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://edemy-bucket-10.s3.ap-southeast-1.amazonaws.com/EXEMPTION+FORM+NEW.pdf",e.next=3,fetch("https://edemy-bucket-10.s3.ap-southeast-1.amazonaws.com/EXEMPTION+FORM+NEW.pdf").then((function(e){return e.arrayBuffer()}));case 3:return a=e.sent,e.next=6,B.PDFDocument.load(a);case 6:return s=e.sent,e.next=9,s.embedFont(B.StandardFonts.Helvetica);case 9:return c=e.sent,r=s.getPages(),o=r[0],i=o.getSize(),i.width,i.height,n.isCompany?(o.drawText("".concat(z()(new Date).format("DD/MM/YYYY")),{x:80,y:720,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText("Company",{x:190,y:702,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(n.registrationNo.toString(),{x:223,y:657,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText("X",{x:55,y:627,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(n.name,{x:260,y:630,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(n.address,{x:98,y:574,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(l.toString(),{x:160,y:555,size:20,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(n.contactNumber.toString(),{x:110,y:535,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(n.email,{x:110,y:515,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)})):(o.drawText("".concat(z()(new Date).format("DD/MM/YYYY")),{x:80,y:720,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText("Personal",{x:190,y:702,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(n.name,{x:120,y:482,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(n.address,{x:120,y:460,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(n.icNumber,{x:90,y:412,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(l.toString(),{x:160,y:555,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)}),o.drawText(n.contactNumber.toString(),{x:390,y:412,size:11,font:c,color:Object(B.rgb)(.1,.1,.1)})),e.next=16,s.save();case 16:d=e.sent,R()(d,"medical-list-example.pdf","application/pdf");case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsxs)(F,{children:[h>1&&Object(y.jsx)("button",{type:"button",onClick:function(){return g(h-1)},className:"py-2 px-4 m-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Back"}),h<=1&&Object(y.jsx)("button",{type:"button",onClick:function(){return g(h+1)},className:"py-2 px-4 m-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Next Step"}),1===h&&Object(y.jsx)(y.Fragment,{children:Object(y.jsx)(H,{handleChange:function(e){for(var t=0,a=0;a<N.length;a++)N[a].shortName===e.target.name&&(N[a].requested=parseInt(e.target.value),N[a].totalCost=parseInt(N[a].requested*N[a].unitCost),v(Object(Y.a)(N))),t+=N[a].requested*N[a].unitCost;m(t)},medicalList:N,grandTotal:l})}),2===h&&Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("button",{type:"button",onClick:S,className:"py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Generate PDF"}),Object(y.jsx)("button",{type:"button",onClick:P,className:"py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Generate PDF 2"}),Object(y.jsx)(G,{donor:n,grandTotal:l,handleFormSubmit:T})]})]})};var J=function(){var e=Object(s.useContext)(v),t=e.state,a=e.dispatch,n=Object(i.f)();Object(s.useEffect)((function(){t.user&&"AGENT"===t.user.role?n.push("/agent/donor"):t.user&&"ADMIN"===t.user.role&&n.push("/admin/agent")}),[t]);var c=Object(s.useState)(""),r=Object(j.a)(c,2),o=r[0],l=r[1],m=Object(s.useState)({email:"gvimlan@minedmind.my",password:"password",accountType:"agent"}),h=Object(j.a)(m,2),g=h[0],f=h[1],O=function(e){f(Object(p.a)(Object(p.a)({},g),{},Object(b.a)({},e.target.name,e.target.value)))},N=function(){var e=Object(u.a)(x.a.mark((function e(t){var s,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d.a.post("/auth/login",g);case 4:s=e.sent,c=s.data,console.log("login: ",c),a({type:"LOGIN",payload:c}),"ADMIN"===c.role?n.push("/admin/agent"):"AGENT"===c.role&&n.push("/agent/donor"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),l(e.t0.response.data);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsx)("div",{className:"flex h-screen",children:Object(y.jsx)("div",{className:"m-auto",children:Object(y.jsx)("form",{onSubmit:N,action:"#",method:"POST",children:Object(y.jsxs)("div",{className:"shadow overflow-hidden sm:rounded-md",children:[Object(y.jsxs)("div",{className:"px-4 py-5 bg-white sm:p-6",children:[Object(y.jsxs)("div",{className:"grid grid-cols-6 gap-6",children:[Object(y.jsx)("span",{className:"text-2xl font-bold",children:"Login"}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-6",children:[Object(y.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),Object(y.jsx)("input",{type:"text",name:"email",id:"email",autoComplete:"email",value:g.email,onChange:O,className:"py-2 px-3 mt-1 focus:ring-gray-500 focus:border-gray-500 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-6",children:[Object(y.jsx)("label",{className:"block text-sm font-medium text-gray-700 items-center mb-2",children:"Account Type:"}),Object(y.jsxs)("label",{className:"inline-flex items-center",children:[Object(y.jsx)("input",{type:"radio",className:"form-radio",name:"accountType",value:"agent",onChange:O,defaultChecked:!0}),Object(y.jsx)("span",{className:"ml-2 text-sm",children:"Agent"})]}),Object(y.jsxs)("label",{className:"inline-flex items-center ml-5",children:[Object(y.jsx)("input",{type:"radio",className:"form-radio",name:"accountType",value:"admin",onChange:O}),Object(y.jsx)("span",{className:"ml-2 text-sm",children:"Admin"})]})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-6",children:[Object(y.jsx)("label",{htmlFor:"last-name",className:"block text-sm font-medium text-gray-700",children:"Password"}),Object(y.jsx)("input",{type:"password",name:"password",id:"password",autoComplete:"password",value:g.password,onChange:O,className:"py-2 px-3 mt-1 focus:ring-gray-500 focus:border-gray-500 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md"})]})]}),""!==o&&Object(y.jsx)("div",{className:"mt-6 px-4 py-2 bg-red-200 rounded-md text-sm font-base",children:o})]}),Object(y.jsx)("div",{className:"px-4 py-3 bg-gray-50 text-right sm:px-6",children:Object(y.jsx)("button",{type:"submit",className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Login"})})]})})})})},V="Tom Cook",X="tom@example.com",_="https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-1.2.1&ixid=eyJhcHBfaWQiOjEyMDd9&auto=format&fit=facearea&facepad=2&w=256&h=256&q=80";function $(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.filter(Boolean).join(" ")}function Q(e){var t=e.children,a=Object(s.useContext)(v).dispatch,n=Object(s.useState)(""),c=Object(j.a)(n,2),r=c[0],o=c[1],l=Object(i.f)(),m=[{name:"Agent",href:"/admin/agent",current:"/admin/agent"===r},{name:"Donor",href:"/admin/donor",current:"/admin/donor"===r},{name:"Transaction",href:"/admin/transaction",current:"/admin/transaction"===r}],x=[{name:"Your Profile",href:""},{name:"Settings",href:""},{name:"Sign out",href:"",logout:function(e){e.preventDefault(),console.log("logout");try{d.a.get("/auth/logout"),a({type:"LOGOUT"}),l.push("/")}catch(t){console.log(t)}}}];return Object(s.useEffect)((function(){o(window.location.pathname)}),[window.location]),Object(y.jsx)(y.Fragment,{children:Object(y.jsxs)("div",{className:"min-h-full",children:[Object(y.jsx)(h.a,{as:"nav",className:"bg-gray-800",children:function(e){var t=e.open;return Object(y.jsxs)(y.Fragment,{children:[Object(y.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:Object(y.jsxs)("div",{className:"flex items-center justify-between h-16",children:[Object(y.jsxs)("div",{className:"flex items-center",children:[Object(y.jsx)("div",{className:"flex-shrink-0",children:Object(y.jsx)("span",{className:"text-2xl text-white font-semibold",children:"PMPPMM"})}),Object(y.jsx)("div",{className:"hidden md:block",children:Object(y.jsx)("div",{className:"ml-10 flex items-baseline space-x-4",children:m.map((function(e){return Object(y.jsx)("a",{href:e.href,className:$(e.current?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white","px-3 py-2 rounded-md text-sm font-medium"),"aria-current":e.current?"page":void 0,children:e.name},e.name)}))})})]}),Object(y.jsx)("div",{className:"hidden md:block",children:Object(y.jsx)("div",{className:"ml-4 flex items-center md:ml-6",children:Object(y.jsxs)(g.a,{as:"div",className:"ml-3 relative",children:[Object(y.jsx)("div",{children:Object(y.jsxs)(g.a.Button,{className:"max-w-xs bg-gray-800 rounded-full flex items-center text-sm focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:[Object(y.jsx)("span",{className:"sr-only",children:"Open user menu"}),Object(y.jsx)("img",{className:"h-8 w-8 rounded-full",src:_,alt:""})]})}),Object(y.jsx)(f.a,{as:s.Fragment,enter:"transition ease-out duration-100",enterFrom:"transform opacity-0 scale-95",enterTo:"transform opacity-100 scale-100",leave:"transition ease-in duration-75",leaveFrom:"transform opacity-100 scale-100",leaveTo:"transform opacity-0 scale-95",children:Object(y.jsx)(g.a.Items,{className:"origin-top-right absolute right-0 mt-2 w-48 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none",children:x.map((function(e){return Object(y.jsx)(g.a.Item,{children:function(t){var a=t.active;return Object(y.jsx)("a",{onClick:e.logout,href:e.href,className:$(a?"bg-gray-100":"","block px-4 py-2 text-sm text-gray-700"),children:e.name})}},e.name)}))})})]})})}),Object(y.jsx)("div",{className:"-mr-2 flex md:hidden",children:Object(y.jsxs)(h.a.Button,{className:"bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:[Object(y.jsx)("span",{className:"sr-only",children:"Open main menu"}),t?Object(y.jsx)(O.c,{className:"block h-6 w-6","aria-hidden":"true"}):Object(y.jsx)(O.b,{className:"block h-6 w-6","aria-hidden":"true"})]})})]})}),Object(y.jsxs)(h.a.Panel,{className:"md:hidden",children:[Object(y.jsx)("div",{className:"px-2 pt-2 pb-3 space-y-1 sm:px-3",children:m.map((function(e){return Object(y.jsx)(h.a.Button,{as:"a",href:e.href,className:$(e.current?"bg-gray-900 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white","block px-3 py-2 rounded-md text-base font-medium"),"aria-current":e.current?"page":void 0,children:e.name},e.name)}))}),Object(y.jsxs)("div",{className:"pt-4 pb-3 border-t border-gray-700",children:[Object(y.jsxs)("div",{className:"flex items-center px-5",children:[Object(y.jsx)("div",{className:"flex-shrink-0",children:Object(y.jsx)("img",{className:"h-10 w-10 rounded-full",src:_,alt:""})}),Object(y.jsxs)("div",{className:"ml-3",children:[Object(y.jsx)("div",{className:"text-base font-medium leading-none text-white",children:V}),Object(y.jsx)("div",{className:"text-sm font-medium leading-none text-gray-400",children:X})]}),Object(y.jsxs)("button",{type:"button",className:"ml-auto bg-gray-800 flex-shrink-0 p-1 rounded-full text-gray-400 hover:text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white",children:[Object(y.jsx)("span",{className:"sr-only",children:"View notifications"}),Object(y.jsx)(O.a,{className:"h-6 w-6","aria-hidden":"true"})]})]}),Object(y.jsx)("div",{className:"mt-3 px-2 space-y-1",children:x.map((function(e){return Object(y.jsx)(h.a.Button,{as:"a",href:e.href,className:"block px-3 py-2 rounded-md text-base font-medium text-gray-400 hover:text-white hover:bg-gray-700",children:e.name},e.name)}))})]})]})]})}}),Object(y.jsx)("header",{className:"bg-white shadow",children:Object(y.jsx)("div",{className:"max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8",children:Object(y.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Dashboard"})})}),Object(y.jsx)("main",{children:Object(y.jsx)("div",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:t})})]})})}function K(e){var t=e.agentList,a=e.openEditModal,s=e.agentApproved,n=e.agentRejected;return Object(y.jsx)("div",{className:"flex flex-col",children:Object(y.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:Object(y.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:Object(y.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:Object(y.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[Object(y.jsx)("thead",{className:"bg-gray-50",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent Name"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IC Number"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Number"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Approved"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Edit"})]})}),Object(y.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:t+1})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.fullName})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.icNumber})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.contactNumber})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.status})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:"true"===e.approved.toString()?"YES":"NO"})}),e.approved?Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium cursor-pointer",children:Object(y.jsx)("button",{onClick:function(){return a(e.id)},className:"bg-indigo-50 p-2 text-xs text-indigo-600 hover:text-indigo-900 hover:bg-indigo-100  rounded-md",children:"Edit"})}):Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium cursor-pointer",children:Object(y.jsxs)("div",{className:"flex space-x-2",children:[Object(y.jsx)("button",{onClick:function(){return s(e.id)},className:"bg-green-50 p-2 text-xs text-green-600 hover:bg-green-100 rounded-md",children:"Approve"}),Object(y.jsx)("button",{onClick:function(){return n(e.id)},className:"bg-red-50 p-2 text-xs text-red-600 hover:bg-red-100 rounded-md",children:"Reject"})]})})]},e.id)}))})]})})})})})}var Z=a(217);a(104);function ee(e){var t=e.title,a=e.content,n=e.successText,c=e.cancelText,r=e.successHandle,o=e.cancelHandle,i=e.openModal,l=e.handleChange,d=e.formSubmitHandle,m=e.formData,x=(e.setDate,Object(s.useRef)(null));return Object(y.jsx)(f.a.Root,{show:i,as:s.Fragment,children:Object(y.jsx)(Z.a,{as:"div",className:"fixed z-10 inset-0 overflow-y-auto",initialFocus:x,onClose:function(e){return!i},children:Object(y.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(y.jsx)(f.a.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(y.jsx)(Z.a.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),Object(y.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(y.jsx)(f.a.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:Object(y.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:Object(y.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Object(y.jsx)("div",{className:"sm:flex sm:items-start",children:Object(y.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[Object(y.jsx)(Z.a.Title,{as:"h3",className:"text-xl leading-6 font-medium text-gray-900",children:t}),Object(y.jsx)("div",{className:"mt-2",children:Object(y.jsx)("p",{className:"text-sm text-gray-500",children:a})}),Object(y.jsxs)("form",{onSubmit:d,children:[Object(y.jsx)("div",{className:"overflow-hidden sm:rounded-md",children:Object(y.jsx)("div",{className:"bg-white pt-5",children:Object(y.jsxs)("div",{className:"grid grid-cols-6 gap-6",children:[Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-4",children:[Object(y.jsx)("label",{htmlFor:"first-name",className:"block text-sm font-medium text-gray-700",children:"Agent Name"}),Object(y.jsx)("input",{type:"text",name:"name",id:"name",disabled:!0,onChange:l,value:m.fullName,className:"py-2 px-3 mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-4",children:[Object(y.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"icNumber"}),Object(y.jsx)("input",{type:"text",name:"icNumber",id:"icNumber",onChange:l,value:m.icNumber,className:"py-2 px-3 mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-4",children:[Object(y.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Contact Number"}),Object(y.jsx)("input",{type:"number",name:"contactNumber",id:"contactNumber",onChange:l,value:m.contactNumber,className:"py-2 px-3 mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-4",children:[Object(y.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status"}),Object(y.jsxs)("select",{id:"status",name:"status",onChange:l,value:m.status,className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[Object(y.jsx)("option",{children:"ACTIVE"}),Object(y.jsx)("option",{children:"SUSPENDED"})]})]})]})})}),Object(y.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse mt-5 pt-5",children:[Object(y.jsx)("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:r,children:n}),Object(y.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:o,ref:x,children:c})]})]})]})})})})})]})})})}var te=function(){var e=Object(s.useState)([]),t=Object(j.a)(e,2),a=t[0],n=t[1],c=function(){var e=Object(u.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/agent/get");case 3:t=e.sent,a=t.data,n(a.allAgents),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){c()}),[]);var r=function(){var e=Object(u.a)(x.a.mark((function e(t){var s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Modal opened"),k(!0),s=a.find((function(e){return e.id===t})),O(s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(u.a)(x.a.mark((function e(t){var s,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.find((function(e){return e.id===t})),e.prev=1,e.next=4,d.a.post("/agent/approve",{id:s.id,email:s.email,approved:!0});case 4:n=e.sent,r=n.data,console.log(r),c(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0),alert(e.t0.response.data.message);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(u.a)(x.a.mark((function e(t){var s,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Transaction rejected: ",t),a.find((function(e){return e.id===t})),e.prev=2,e.next=5,d.a.post("/agent/update",f);case 5:s=e.sent,n=s.data,console.log(n),c(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(u.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:k(!1);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d.a.post("/agent/update",f);case 4:c(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),h=Object(s.useState)({id:void 0,email:void 0,fullName:void 0,contactNumber:void 0,icNumber:void 0,username:void 0,status:void 0,approved:void 0}),g=Object(j.a)(h,2),f=g[0],O=g[1],N=Object(s.useState)(!1),v=Object(j.a)(N,2),w=v[0],k=v[1];return Object(y.jsxs)(Q,{children:[Object(y.jsx)(K,{agentList:a,openEditModal:r,agentApproved:o,agentRejected:i}),Object(y.jsx)(ee,{title:"Edit",content:"Edit Data",successText:"Submit",cancelText:"Cancel",successHandle:l,cancelHandle:function(){k(!1)},openModal:w,handleChange:function(e){O(Object(p.a)(Object(p.a)({},f),{},Object(b.a)({},e.target.name,e.target.value)))},formSubmitHandle:m,formData:f,setDate:function(e){O(Object(p.a)(Object(p.a)({},f),{},{quotationDate:e}))}})]})};function ae(e){var t=e.transactionList,a=e.openEditModal,s=e.transactionApproved,n=e.transactionRejected;return Object(y.jsx)("div",{className:"flex flex-col",children:Object(y.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:Object(y.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:Object(y.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:Object(y.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[Object(y.jsx)("thead",{className:"bg-gray-50",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent Name"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Donor Name"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment Type"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cheque Date"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cheque No"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Bank Name"}),Object(y.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:Object(y.jsx)("span",{className:"sr-only",children:"Edit"})})]})}),Object(y.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:t+1})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.agent.fullName})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.donor.name})}),Object(y.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:["REJECTED"===e.status&&Object(y.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:e.status}),"COMPLETED"===e.status&&Object(y.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:e.status}),"REJECTED"!==e.status&&"COMPLETED"!==e.status&&Object(y.jsx)("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:e.status})]}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.paymentType})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.chequeDate&&z()(e.chequeDate).format("DD/MM/YYYY")})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.chequeNo})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.bankName})}),"PENDING"===e.status?Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium cursor-pointer",children:Object(y.jsxs)("div",{className:"flex space-x-2",children:[Object(y.jsx)("button",{onClick:function(){return s(e.id)},className:"bg-green-50 p-2 text-xs text-green-600 hover:bg-green-100 rounded-md",children:"Approve"}),Object(y.jsx)("button",{onClick:function(){return n(e.id)},className:"bg-red-50 p-2 text-xs text-red-600 hover:bg-red-100 rounded-md",children:"Reject"})]})}):Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium cursor-pointer",children:Object(y.jsx)("button",{onClick:function(){return a(e.id)},className:"bg-indigo-50 p-2 text-xs text-indigo-600 hover:text-indigo-900 hover:bg-indigo-100  rounded-md",children:"Edit"})})]},e.id)}))})]})})})})})}var se=a(78),ne=a.n(se);function ce(e){var t=e.title,a=e.content,n=e.successText,c=e.cancelText,r=e.successHandle,o=e.cancelHandle,i=e.openModal,l=e.handleChange,d=e.formSubmitHandle,m=e.formData,x=e.setDate,u=Object(s.useRef)(null),b=Object(s.useState)(new Date),p=Object(j.a)(b,2);p[0],p[1];return Object(y.jsx)(f.a.Root,{show:i,as:s.Fragment,children:Object(y.jsx)(Z.a,{as:"div",className:"fixed z-10 inset-0 overflow-y-auto",initialFocus:u,onClose:function(e){return!i},children:Object(y.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(y.jsx)(f.a.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(y.jsx)(Z.a.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),Object(y.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(y.jsx)(f.a.Child,{as:s.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:Object(y.jsx)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:Object(y.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Object(y.jsx)("div",{className:"sm:flex sm:items-start",children:Object(y.jsxs)("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left w-full",children:[Object(y.jsx)(Z.a.Title,{as:"h3",className:"text-xl leading-6 font-medium text-gray-900",children:t}),Object(y.jsx)("div",{className:"mt-2",children:Object(y.jsx)("p",{className:"text-sm text-gray-500",children:a})}),Object(y.jsxs)("form",{onSubmit:d,action:"#",method:"POST",children:[Object(y.jsx)("div",{className:"overflow-hidden sm:rounded-md",children:Object(y.jsx)("div",{className:"bg-white pt-5",children:Object(y.jsxs)("div",{className:"grid grid-cols-6 gap-6",children:[Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-4",children:[Object(y.jsx)("label",{htmlFor:"first-name",className:"block text-sm font-medium text-gray-700",children:"Donor Name"}),Object(y.jsx)("input",{type:"text",name:"title",id:"title",disabled:!0,onChange:l,value:m.donor.name,className:"py-2 px-3 mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-4",children:[Object(y.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:"Status"}),Object(y.jsxs)("select",{id:"status",name:"status",autoComplete:"status",onChange:l,value:m.status,className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[Object(y.jsx)("option",{children:"PENDING"}),Object(y.jsx)("option",{children:"REJECTED"}),Object(y.jsx)("option",{children:"APPROVED"}),Object(y.jsx)("option",{children:"COMPLETED"})]})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-4",children:[Object(y.jsx)("label",{htmlFor:"payment-type",className:"block text-sm font-medium text-gray-700",children:"Payment Type"}),Object(y.jsxs)("select",{id:"paymentType",name:"paymentType",onChange:l,value:m.paymentType||" ",className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[Object(y.jsx)("option",{children:void 0}),Object(y.jsx)("option",{children:"CHEQUE"}),Object(y.jsx)("option",{children:"ONLINE_TRANSFER"})]})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-4",children:[Object(y.jsx)("label",{htmlFor:"quotation-no",className:"block text-sm font-medium text-gray-700",children:"Cheque Date"}),Object(y.jsx)(ne.a,{selected:m.chequeDate&&z()(m.chequeDate).toDate(),onChange:function(e){return x(z()(e).toISOString())}})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-4",children:[Object(y.jsx)("label",{htmlFor:"quotation-no",className:"block text-sm font-medium text-gray-700",children:"Cheque No"}),Object(y.jsx)("input",{type:"text",name:"chequeNo",id:"chequeNo",onChange:l,value:m.chequeNo||" ",className:"py-2 px-3 mt-1 focus:ring-indigo-500 focus:border-indigo-500 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-4",children:[Object(y.jsx)("label",{htmlFor:"bank-name",className:"block text-sm font-medium text-gray-700",children:"Bank Name"}),Object(y.jsxs)("select",{id:"bankName",name:"bankName",onChange:l,value:m.bankName||" ",className:"mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[Object(y.jsx)("option",{children:void 0}),Object(y.jsx)("option",{children:"HLB"}),Object(y.jsx)("option",{children:"CIMB"}),Object(y.jsx)("option",{children:"MBB"}),Object(y.jsx)("option",{children:"RHB"})]})]})]})})}),Object(y.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse mt-5 pt-5",children:[Object(y.jsx)("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:r,children:n}),Object(y.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:o,ref:u,children:c})]})]})]})})})})})]})})})}function re(){var e=Object(s.useState)([]),t=Object(j.a)(e,2),a=t[0],n=t[1],c=function(){var e=Object(u.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/transaction/admin/get");case 3:t=e.sent,a=t.data,n(a.allTransactions),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){c()}),[]);var r=function(){var e=Object(u.a)(x.a.mark((function e(t){var s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Modal opened"),k(!0),s=a.find((function(e){return e.id===t})),O(s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(u.a)(x.a.mark((function e(t){var s,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Transaction approved: ",t),s=a.find((function(e){return e.id===t})),e.prev=2,e.next=5,d.a.post("/transaction/admin/update",{id:s.id,status:"APPROVED"});case 5:n=e.sent,r=n.data,console.log(r),c(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(u.a)(x.a.mark((function e(t){var s,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Transaction rejected: ",t),s=a.find((function(e){return e.id===t})),e.prev=2,e.next=5,d.a.post("/transaction/admin/update",{id:s.id,status:"REJECTED"});case 5:n=e.sent,r=n.data,console.log(r),c(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=Object(u.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.post("/transaction/admin/update",f);case 3:c(),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:k(!1);case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(x.a.mark((function e(t){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d.a.post("/transaction/admin/update",{formData:f});case 4:c(),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}(),h=Object(s.useState)({amount:void 0,bankName:void 0,chequeDate:void 0,chequeNo:void 0,donor:{name:void 0},id:void 0,paymentType:void 0}),g=Object(j.a)(h,2),f=g[0],O=g[1],N=Object(s.useState)(!1),v=Object(j.a)(N,2),w=v[0],k=v[1];return Object(y.jsxs)(Q,{children:[Object(y.jsx)(ae,{transactionList:a,openEditModal:r,transactionApproved:o,transactionRejected:i}),Object(y.jsx)(ce,{title:"Edit",content:"Edit Data",successText:"Submit",cancelText:"Cancel",successHandle:l,cancelHandle:function(){k(!1)},openModal:w,handleChange:function(e){O(Object(p.a)(Object(p.a)({},f),{},Object(b.a)({},e.target.name,e.target.value)))},formSubmitHandle:m,formData:f,setDate:function(e){O(Object(p.a)(Object(p.a)({},f),{},{chequeDate:e}))}})]})}function oe(e){var t=e.donorList;e.openEditModal,e.agentApproved,e.agentRejected;return Object(y.jsx)("div",{className:"flex flex-col",children:Object(y.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:Object(y.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:Object(y.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:Object(y.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[Object(y.jsx)("thead",{className:"bg-gray-50",children:Object(y.jsxs)("tr",{children:[Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"No"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Agent Name"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Donor Name"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IC Number / Reg Number"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Person"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contact Number"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),Object(y.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Edit"})]})}),Object(y.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map((function(e,t){return Object(y.jsxs)("tr",{children:[Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:t+1})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.agent.fullName})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.name})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.icNumber||e.registrationNo})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.contactPerson})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.contactNumber})}),Object(y.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(y.jsx)("div",{className:"text-sm text-gray-900",children:e.status})})]},e.id)}))})]})})})})})}var ie=function(){var e=Object(s.useState)([]),t=Object(j.a)(e,2),a=t[0],n=t[1],c=function(){var e=Object(u.a)(x.a.mark((function e(){var t,a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/donor/admin/get");case 3:t=e.sent,a=t.data,console.log(a),n(a.allDonors),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();Object(s.useEffect)((function(){c()}),[]);var r=function(){var e=Object(u.a)(x.a.mark((function e(t){var s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Modal opened"),f(!0),s=a.find((function(e){return e.id===t})),p(s);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(){var e=Object(u.a)(x.a.mark((function e(t){var s,n,r;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=a.find((function(e){return e.id===t})),e.prev=1,e.next=4,d.a.post("/agent/approve",{id:s.id,approved:!0});case 4:n=e.sent,r=n.data,console.log(r),c(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),i=function(){var e=Object(u.a)(x.a.mark((function e(t){var s,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Transaction rejected: ",t),a.find((function(e){return e.id===t})),e.prev=2,e.next=5,d.a.post("/agent/update",b);case 5:s=e.sent,n=s.data,console.log(n),c(),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t){return e.apply(this,arguments)}}(),l=Object(s.useState)({id:void 0,email:void 0,fullName:void 0,contactNumber:void 0,icNumber:void 0,username:void 0,status:void 0,approved:void 0}),m=Object(j.a)(l,2),b=m[0],p=m[1],h=Object(s.useState)(!1),g=Object(j.a)(h,2),f=(g[0],g[1]);return Object(y.jsx)(Q,{children:Object(y.jsx)(oe,{donorList:a,openEditModal:r,agentApproved:o,agentRejected:i})})};function le(){Object(i.f)();var e=Object(s.useState)(""),t=Object(j.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(""),r=Object(j.a)(c,2),o=r[0],l=r[1],m=Object(s.useState)({email:"gvimlan@minedmind.my",fullName:"Vimlan G",password:"password",confirmPassword:"password",contactNumber:"0123456789",icNumber:"0123456789"}),h=Object(j.a)(m,2),g=h[0],f=h[1],O=function(e){f(Object(p.a)(Object(p.a)({},g),{},Object(b.a)({},e.target.name,e.target.value)))},N=function(){var e=Object(u.a)(x.a.mark((function e(t){var a,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n(""),g.password!==g.confirmPassword&&n("Both password do not match"),e.prev=3,e.next=6,d.a.post("/auth/register",g);case 6:a=e.sent,s=a.data,console.log(s),l("Your account is pending approval from admin. You will receive an email once approved by admin"),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),n(e.t0.response.data.message);case 15:case"end":return e.stop()}}),e,null,[[3,12]])})));return function(t){return e.apply(this,arguments)}}();return Object(y.jsx)("div",{className:"flex h-screen",children:Object(y.jsx)("div",{className:"m-auto",children:Object(y.jsx)("form",{onSubmit:N,action:"#",method:"POST",children:Object(y.jsxs)("div",{className:"shadow overflow-hidden sm:rounded-md",children:[Object(y.jsxs)("div",{className:"px-4 py-5 bg-white sm:p-6",children:[Object(y.jsxs)("div",{className:"grid grid-cols-6 gap-6",children:[Object(y.jsx)("div",{className:"col-span-6 sm:col-span-6",children:Object(y.jsx)("span",{className:"text-2xl font-bold",children:"Register"})}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-6",children:[Object(y.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),Object(y.jsx)("input",{type:"text",name:"email",id:"email",autoComplete:"email",value:g.email,onChange:O,className:"py-2 px-3 mt-1 focus:ring-gray-500 focus:border-gray-500 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-6 sm:col-span-6",children:[Object(y.jsx)("label",{htmlFor:"full-name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),Object(y.jsx)("input",{type:"text",name:"fullName",id:"fullName",value:g.fullName,onChange:O,className:"py-2 px-3 mt-1 focus:ring-gray-500 focus:border-gray-500 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-3 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"ic-number",className:"block text-sm font-medium text-gray-700",children:"IC Number"}),Object(y.jsx)("input",{type:"number",name:"icNumber",id:"icNumber",value:g.icNumber,onChange:O,className:"py-2 px-3 mt-1 focus:ring-gray-500 focus:border-gray-500 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-3 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"contact-number",className:"block text-sm font-medium text-gray-700",children:"Contact Number"}),Object(y.jsx)("input",{type:"number",name:"contactNumber",id:"contactNumber",value:g.contactNumber,onChange:O,className:"py-2 px-3 mt-1 focus:ring-gray-500 focus:border-gray-500 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-3 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),Object(y.jsx)("input",{type:"password",name:"password",id:"password",value:g.password,onChange:O,className:"py-2 px-3 mt-1 focus:ring-gray-500 focus:border-gray-500 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md"})]}),Object(y.jsxs)("div",{className:"col-span-3 sm:col-span-3",children:[Object(y.jsx)("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),Object(y.jsx)("input",{type:"password",name:"confirmPassword",id:"confirmPassword",value:g.confirmPassword,onChange:O,className:"py-2 px-3 mt-1 focus:ring-gray-500 focus:border-gray-500 block w-full shadow-sm sm:text-sm border border-gray-300 rounded-md"})]})]}),""!==a&&Object(y.jsx)("div",{className:"mt-6 px-4 py-2 bg-red-200 rounded-md text-sm font-base",children:a}),""!==o&&Object(y.jsx)("div",{className:"mt-6 px-4 py-2 bg-green-200 rounded-md text-sm font-base",children:o})]}),!o&&Object(y.jsx)("div",{className:"px-4 py-3 bg-gray-50 text-right sm:px-6",children:Object(y.jsx)("button",{type:"submit",className:"is-disabled inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Register"})})]})})})})}var de=function(){return d.a.defaults.baseURL="/api",Object(y.jsx)("div",{children:Object(y.jsx)("header",{children:Object(y.jsx)(o.a,{children:Object(y.jsx)(k,{children:Object(y.jsx)("div",{children:Object(y.jsxs)(i.c,{children:[Object(y.jsx)(i.a,{exact:!0,path:"/",children:Object(y.jsx)(J,{})}),Object(y.jsx)(i.a,{exact:!0,path:"/register",children:Object(y.jsx)(le,{})}),Object(y.jsx)(i.a,{exact:!0,path:"/agent/donor",children:Object(y.jsx)(q,{})}),Object(y.jsx)(i.a,{exact:!0,path:"/agent/add-donor",children:Object(y.jsx)(E,{})}),Object(y.jsx)(i.a,{exact:!0,path:"/agent/transaction",children:Object(y.jsx)(I,{})}),Object(y.jsx)(i.a,{exact:!0,path:"/agent/add-transaction/:donorId",children:Object(y.jsx)(W,{})}),Object(y.jsx)(i.a,{exact:!0,path:"/admin/agent",children:Object(y.jsx)(te,{})}),Object(y.jsx)(i.a,{exact:!0,path:"/admin/donor",children:Object(y.jsx)(ie,{})}),Object(y.jsx)(i.a,{exact:!0,path:"/admin/transaction",children:Object(y.jsx)(re,{})})]})})})})})})};r.a.render(Object(y.jsx)(n.a.StrictMode,{children:Object(y.jsx)(de,{})}),document.getElementById("root"))}},[[209,1,2]]]);
//# sourceMappingURL=main.b1875a0b.chunk.js.map